<!doctype html>
<html lang="ru">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Согласование заявок</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		<style>
			.alert-fixed {
				position:fixed; 
				top: 0px; 
				left: 0px; 
				width: 100%;
				z-index:9999;
			}
		</style>
		{% block styles %}{% endblock %}
	</head>
	<body>
		<header id="header" class="header">
			<div class = "container">
				<div class = "row">
					<div class = "col">
						{% with messages = get_flashed_messages() %}
							{% if messages %}
								<div class="flask-flashes alert alert-primary" role="alert" id="flaskFlashes">
									{% for message in messages %}
										{{ message }}<br>
									{% endfor %}
								</div>
							{% endif %}
						{% endwith %}
					</div>
				</div>
				<div class="row">
					<div class="col-4 text-right">
						<h3 class = "my-0 mr-md-auto font-weight-normal">
							<a href="/index"><img src="/static/logo.png" alt="Logo"></a>
						</h3>
					</div>
					<div class="col-8 text-left">
						<h3 class = "my-0 mr-md-auto font-weight-normal pt-3">
							Согласование заявок
						</h3>
					</div>
				</div>
				{% if not current_user.is_anonymous %}
					<div class = "row bg-light">
						<div class = "col">
							<nav class="navbar navbar-expand-md navbar-light">
								<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
									<span class="navbar-toggler-icon"></span>
								</button>
								<div class="collapse navbar-collapse" id="navbarSupportedContent">
									<ul class="navbar-nav mr-auto">
										<li class="nav-item {% if menuItem == 0 %} active {% endif %}">
											<a class="nav-link" href="{{ url_for('main.ShowIndex') }}">Главная</a>
										</li>
										<li class="nav-item {% if menuItem == 1 %} active {% endif %}">
											<a class="nav-link" href="{{ url_for('main.ShowSettings') }}">Настройки</a>
										</li>
										<li class="nav-item {% if menuItem == 1 %} active {% endif %}">
											<a class="nav-link" href="{{ url_for('auth.PerformLogout') }}">Выйти</a>
										</li>
									</ul>
								</div>
							</nav>
						</div>
						<div class="col text-right text-warning">
							{{ current_user.role }}
						</div>
					</div>
				{% endif %}
			</div>
		</header>
		<section class="my-2">
			{% block content %}{% endblock %}
		</section>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js" integrity="sha384-qlmct0AOBiA2VPZkMY3+2WqkHtIQ9lSdAsAn5RUJD/3vA5MKDgSGcdmIv4ycVxyn" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<script>
			function ShowAjaxFlashes(data){
				var flaskFlashes = $('#flaskFlashes');
				flaskFlashes.empty();
				flaskFlashes.addClass('d-none');
				var ajaxAlert = $('#ajaxAlertTemplate').clone();
				ajaxAlert.removeAttr('id');
				if (data.status == true)
				{
					ajaxAlert.addClass('alert-primary');
				}
				else
				{
					ajaxAlert.addClass('alert-warning');
				}
				data.flash.forEach(function(element) {
					ajaxAlert.append(element + '<br>');
				});
				$('body').append(ajaxAlert);
			}
		</script>
		{% block scripts %}{% endblock %}
		<div class="d-none" id="templates">
			<div class="alert alert-fixed" role="alert" id="ajaxAlertTemplate">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
			</div>
			{% block templates %}{% endblock %}
		</div>
	</body>
</html>